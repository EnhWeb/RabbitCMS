$(function () { var prizeData = (function () { var prizeData; var privateMethod = { setDegree: function () { for (var j = 0; j < prizeData.list.length; j++) { prizeData.list[j]["degree"] = 45 * j; prizeData.list[j]["prizedegree"] = 360 - 45 * j } }, mixData: function () { if (prizeData.list.length < prizeData.lenth) { var distance = prizeData.lenth - prizeData.list.length, i = 0; while (distance > 0) { i++; distance--; prizeData.list.splice(i * 2 - 1, 0, { name: "再接再励", imgsrc: "images/test_xx.png	" }) } } this.setDegree() } }; return { init: function (serverPrizeData) { if (!!serverPrizeData) { prizeData = serverPrizeData } else { prizeData = {} } prizeData.lenth = 8; privateMethod.mixData() }, get: function () { return prizeData } } })(); var lotteryObj = (function () { return { init: function () { prizeData.init(initPrizeItem); var data = prizeData.get(); var html = template("prizeitem-tpl", data); $("#J_lottery-prize-list").append(html) } } })(); lotteryObj.init() }); function HeaderAnimate() { var oBox = $(".zj-listbox"), oul = oBox.find("ul"), liHeight = 41, liSize = oul.find("li").size(), timer = 4000, interTimer = null, nowIndex = 0; interTimer = setInterval(function () { DoAnimate() }, timer); function DoAnimate() { if (liSize <= 1) { clearInterval(interTimer) } nowIndex++; if (nowIndex == liSize) { nowIndex = 0 } oul.css({ "-webkit-transform": "translateY(" + (-nowIndex * liHeight) + "px)", "transform": "translateY(" + (-nowIndex * liHeight) + "px)" }) } } function zjAnimate() { oul = $(".zj-list"), liHeight = 41, liSize = oul.find("li").size(), timer = 4000, interTimer = null, nowIndex = 0; interTimer = setInterval(function () { DoAnimate() }, timer); function DoAnimate() { if (liSize <= 5) { clearInterval(interTimer) } nowIndex++; if ((nowIndex + 4) == liSize) { nowIndex = 0 } oul.css({ "-webkit-transform": "translateY(" + (-nowIndex * liHeight) + "px)", "transform": "translateY(" + (-nowIndex * liHeight) + "px)" }) } };